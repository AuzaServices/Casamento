<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Lista de Presentes</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #fff5f7;
      margin: 0;
      padding: 0;
    }

    .formulario {
      max-width: 825px;
      margin: 40px auto;
      background-color: #ffffff;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(200, 150, 170, 0.3);
      padding: 30px;
    }

    h1 {
      color: #b76e79;
      text-align: center;
      margin-bottom: 30px;
      font-size: 32px;
    }

    label {
      display: block;
      margin-top: 20px;
      color: #333;
      font-weight: bold;
      font-size: 28px;
    }

    input[type="text"] {
      width: 100%;
      padding: 16px;
      margin-top: 8px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 18px;
    }

    .presentes {
      display: flex;
      flex-direction: column;
      gap: 16px;
      margin-top: 30px;
    }

    .botao-presente {
      width: 100%;
      padding: 25px;
      background-color: #b76e79;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 24px;
      transition: background-color 0.3s;
    }

    .botao-presente:hover:not(:disabled) {
      background-color: #a65c6a;
    }

    .botao-presente:disabled {
      background-color: #e0cfd4;
      cursor: not-allowed;
      text-decoration: line-through;
    }

    .pix-section {
      margin-top: 40px;
      padding-top: 30px;
      border-top: 1px solid #e0cfd4;
    }

    .pix-link {
      margin-top: 15px;
      font-size: 18px;
      padding: 16px;
      width: 100%;
    }

    button {
      display: block;
      width: 100%;
      margin-top: 20px;
      padding: 16px;
      background-color: #b76e79;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 20px;
      cursor: pointer;
    }

    button:hover {
      background-color: #a65c6a;
    }

    @media (max-width: 600px) {
      .formulario {
        width: 100vw;
        padding: 24px;
        margin: 0;
        border-radius: 0;
      }

      .botao-presente {
        font-size: 20px;
        padding: 20px;
      }

      label {
        font-size: 20px;
      }

      h1 {
        font-size: 28px;
      }
    }
  </style>
</head>
<body>
  <div class="formulario">
    <h1>Lista de Presentes üíù</h1>

    <label for="nome">Seu nome:</label>
    <input type="text" id="nome" name="nome" placeholder="Digite seu nome">

    <label>Escolha um presente:</label>
    <div class="presentes" id="presentes"></div>

    <div class="pix-section">
      <label for="pix">Contribui√ß√£o via Pix:</label>

      <div style="margin-top: 15px;">
        <strong style="font-size: 22px; color: #b76e79;">Jucileide Silva de Oliveira</strong>
        <img src="https://i.imgur.com/AfWmbQG.png" alt="QR Code Pix" style="width: 100%; max-width: 250px; margin-top: 10px; border-radius: 10px; border: 2px dashed #d8a1b2;">
      </div>

      <input type="text" class="pix-link" id="pix" readonly value="00020126580014BR.GOV.BCB.PIX01369dea9f45-a174-41f4-a1eb-b614165cca525204000053039865802BR5925Jucileide Silva de Olivei6009SAO PAULO62140510YxfOis8tXz63047DB3">

      <button onclick="copiarPix()">Copiar link do Pix</button>
      <button onclick="enviarFormulario()" style="background-color: #6a0dad;">Enviar</button>
    </div>
  </div>

  <script>
const listaPadrao = [
  "X√≠caras branca", "Jogo de panelas cer√¢mica", "Panela de press√£o",
  "Kit de facas", "Kit de cama completo", "Kit de toalha de banho",
  "Escorredor de lou√ßa (Inox ou preta)", "Travessas de vidro",
  "Jogo de jantar porcelana branca", "Jogo de talher inox",
  "Jarra de suco de vidro", "Batedeira (branca ou preta)",
  "Jogo de copo de cristal", "Jogo de ta√ßas", "Boleira de vidro",
  "Ta√ßas de sobremesa", "Organizador de alimentos (vidro ou acr√≠lico)"
];

function carregarPresentes() {
  fetch("https://casamento-0byc.onrender.com/presentes")
    .then(response => response.json())
    .then(lista => {
      renderizarPresentes(lista);
    })
    .catch(() => {
      // Se falhar, usa a lista local como fallback
      const listaFallback = listaPadrao.map(nome => ({ nome, indisponivel: false }));
      renderizarPresentes(listaFallback);
    });
}

function renderizarPresentes(lista) {
  const container = document.getElementById("presentes");
  container.innerHTML = "";

  lista.forEach(presente => {
    const btn = document.createElement("button");
    btn.className = "botao-presente";
    btn.textContent = presente.nome;
    btn.disabled = presente.indisponivel;

    btn.onclick = () => {
      presenteSelecionado = presente.nome;
      document.querySelectorAll(".botao-presente").forEach(b => b.classList.remove("selecionado"));
      btn.classList.add("selecionado");
      alert(`Voc√™ escolheu: ${presente.nome}`);
    };

    container.appendChild(btn);
  });
}

    function carregarPresentes() {
      fetch("https://casamento-0byc.onrender.com/presentes")
        .then(response => response.json())
        .then(lista => {
          const container = document.getElementById("presentes");
          container.innerHTML = "";

          lista.forEach(presente => {
            const btn = document.createElement("button");
            btn.className = "botao-presente";
            btn.textContent = presente.nome;
            btn.disabled = presente.indisponivel;

            btn.onclick = () => {
              presenteSelecionado = presente.nome;
              document.querySelectorAll(".botao-presente").forEach(b => b.classList.remove("selecionado"));
              btn.classList.add("selecionado");
              alert(`Voc√™ escolheu: ${presente.nome}`);
            };

            container.appendChild(btn);
          });
        });
    }

    function copiarPix() {
      const pixInput = document.getElementById("pix");
      navigator.clipboard.writeText(pixInput.value.trim());
      alert("Link do Pix copiado com sucesso!");
    }

    function enviarFormulario() {
      const nome = document.getElementById("nome").value.trim();
      const dataAtual = new Date().toISOString().split("T")[0];

      if (!nome) {
        alert("Por favor, preencha seu nome.");
        return;
      }

      if (!presenteSelecionado) {
        alert("Escolha um presente.");
        return;
      }

      fetch("https://casamento-0byc.onrender.com/presentes", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          nome: nome,
          data_presente: dataAtual,
          presente_escolhido: presenteSelecionado
        })
      })
      .then(response => response.text())
      .then(data => {
        console.log("Presente registrado:", data);
        window.location.href = "/obrigado.html";
      })
      .catch(error => {
        console.error("Erro:", error);
        alert("Erro ao enviar.");
      });
    }

    window.onload = carregarPresentes;
  </script>
</body>
</html>